Central de servi√ßos
Sistema Central de Servi√ßos - SEJUS/DF
Descri√ß√£o Executiva
Sistema web corporativo de gest√£o de chamados e servi√ßos desenvolvido para a Secretaria de Estado de Justi√ßa e Cidadania do Distrito Federal. A aplica√ß√£o digitaliza e automatiza o fluxo completo de solicita√ß√µes internas, desde abertura at√© resolu√ß√£o, incluindo suporte t√©cnico, gest√£o de telefonia m√≥vel, empr√©stimo de equipamentos e controle de ativos.

Contexto e Desafio
A SEJUS enfrentava processos manuais descentralizados sem rastreabilidade, comunica√ß√£o fragmentada entre solicitantes e equipe t√©cnica, e aus√™ncia de m√©tricas para tomada de decis√£o. O desafio foi criar uma solu√ß√£o escal√°vel que integrasse com a infraestrutura corporativa existente (Active Directory) e atendesse m√∫ltiplos perfis de usu√°rio.

Solu√ß√£o T√©cnica
Desenvolvi uma aplica√ß√£o full-stack usando arquitetura MVC com Flask (Python), implementando:

Autentica√ß√£o corporativa via LDAP/Active Directory com SSO
Sistema de notifica√ß√µes em tempo real com polling otimizado e cache inteligente
Chat integrado com upload de anexos e renderiza√ß√£o incremental para evitar flickering
Formul√°rios din√¢micos configur√°veis via interface\ administrativa
Dual database binding (MySQL) para sincroniza√ß√£o com banco corporativo
Sistema de permiss√µes granular baseado em grupos e perfis
Stack Tecnol√≥gico
Backend: Python 3 ‚Ä¢ Flask ‚Ä¢ SQLAlchemy ‚Ä¢ Flask-Login ‚Ä¢ PyMySQL ‚Ä¢ LDAP Integration
Frontend: JavaScript ES6+ ‚Ä¢ jQuery ‚Ä¢ Bootstrap 4 ‚Ä¢ Chart.js ‚Ä¢ DataTables
Database: MySQL 8.0 (dual binding)
Infraestrutura: Linux ‚Ä¢ Apache/Nginx ‚Ä¢ WSGI ‚Ä¢ SMTP

Resultados Mensur√°veis
80% de redu√ß√£o no tempo de abertura de chamados
100% de rastreabilidade em todas as solicita√ß√µes
60% de aumento na satisfa√ß√£o dos usu√°rios (baseado em avalia√ß√µes)
Centraliza√ß√£o completa de 5+ processos manuais diferentes
Destaques T√©cnicos
Implementa√ß√£o de design patterns (Repository, Factory, Observer, Decorator)
Otimiza√ß√£o de performance com renderiza√ß√£o incremental e lazy loading
Security best practices: SQL Injection prevention, CSRF protection, sanitiza√ß√£o de inputs
Arquitetura modular usando Flask Blueprints para escalabilidade
Sistema de auditoria completo com logs de todas as a√ß√µes
Compet√™ncias Demonstradas
Desenvolvimento Full Stack ‚Ä¢ Arquitetura de Software ‚Ä¢ Integra√ß√£o LDAP/AD ‚Ä¢ Performance Optimization ‚Ä¢ Database Design ‚Ä¢ RESTful API ‚Ä¢ Security ‚Ä¢ UX/UI ‚Ä¢ Resolu√ß√£o de Problemas Complexos


Sistema de Fiscaliza√ß√£o e Monitoramento - SUBSIS/SEJUS-DF
Descri√ß√£o do Projeto
Sistema web completo de gest√£o e fiscaliza√ß√£o desenvolvido para a Subsecretaria do Sistema Penitenci√°rio (SUBSIS) da Secretaria de Justi√ßa do Distrito Federal. A aplica√ß√£o gerencia fiscaliza√ß√µes de m√∫ltiplos tipos de estabelecimentos, incluindo sistemas de videomonitoramento, cl√≠nicas, cemit√©rios, cremat√≥rios e funer√°rias.

Principais Funcionalidades
Gest√£o de Fiscaliza√ß√µes Multi-tipo: Sistema modular que suporta diferentes tipos de fiscaliza√ß√£o com checklists customizados para cada categoria (c√¢meras, cl√≠nicas, cemit√©rios, cremat√≥rios e funer√°rias)

Controle de Usu√°rios e Permiss√µes: Sistema de autentica√ß√£o integrado com LDAP/Active Directory, com perfis de acesso (Fiscalizador e Administrador) e controle granular de permiss√µes

Dashboard Analytics: Painel interativo com m√©tricas, gr√°ficos e indicadores de desempenho usando Chart.js para visualiza√ß√£o de dados em tempo real

Gerenciamento de Quantitativos: Sistema de controle de itens previstos versus verificados, com acompanhamento detalhado de equipamentos e componentes de infraestrutura

Gest√£o Documental: Upload e organiza√ß√£o de fotos e anexos como evid√™ncias, com suporte para m√∫ltiplos formatos e gerenciamento por categoria

Assinaturas Digitais: Sistema de assinatura digital por cargo (fiscais e representantes) com controle de recusa e impossibilidade de assinatura

Gera√ß√£o de Relat√≥rios: Exporta√ß√£o automatizada de relat√≥rios em PDF e Excel com dados completos das fiscaliza√ß√µes, incluindo fotos e assinaturas

Sistema de Log Completo: Auditoria de todas as a√ß√µes realizadas no sistema com registro de usu√°rio, IP e timestamp

Tecnologias Utilizadas
Backend:

Python 3.7.6
Flask 1.0.2 (Arquitetura baseada em Blueprints)
SQLAlchemy (ORM)
Flask-Login (Autentica√ß√£o)
LDAP3 (Integra√ß√£o Active Directory)
MySQL 8.0
Frontend:

HTML5, CSS3, JavaScript (ES6+)
Bootstrap 4 (UI/UX Responsivo)
jQuery
Chart.js (Visualiza√ß√£o de Dados)
Infraestrutura:

wkhtmltopdf (Gera√ß√£o de PDFs)
WSGI (Deploy em produ√ß√£o)
Sistema de vari√°veis de ambiente (.env)
Arquitetura e Padr√µes
Padr√£o MVC: Separa√ß√£o clara entre Models, Views e Controllers
Blueprint Architecture: M√≥dulos independentes para cada tipo de fiscaliza√ß√£o
Database Migration: Controle de vers√£o do banco de dados com Flask-Migrate
Security: Prote√ß√£o de rotas com decorators, sanitiza√ß√£o de uploads, limita√ß√£o de tamanho de arquivos
Logging: Sistema centralizado de auditoria e rastreamento de a√ß√µes
Diferenciais T√©cnicos
Integra√ß√£o com Active Directory corporativo para autentica√ß√£o √∫nica (SSO)
Sistema modular e escal√°vel, permitindo f√°cil adi√ß√£o de novos tipos de fiscaliza√ß√£o
Interface responsiva e intuitiva, otimizada para uso em campo
Gerenciamento robusto de arquivos com valida√ß√£o de extens√µes e controle de tamanho
Arquitetura preparada para deploy em produ√ß√£o com WSGI e suporte a SSL/TLS
Resultados e Impacto
Sistema utilizado pela equipe de fiscaliza√ß√£o da SEJUS-DF para padroniza√ß√£o e digitaliza√ß√£o de processos, eliminando formul√°rios em papel e centralizando informa√ß√µes. Permite rastreabilidade completa das fiscaliza√ß√µes e gera√ß√£o r√°pida de relat√≥rios para tomada de decis√£o.

# DITRANS - Sistema de Gest√£o de Frota Veicular

## üìã Sobre o Projeto

O **DITRANS** (Departamento de Tr√¢nsito) √© um m√≥dulo de gest√£o de frota desenvolvido para o Sistema Unificado de Administra√ß√£o Governamental (SUAG). O sistema foi criado para controlar e monitorar a movimenta√ß√£o de ve√≠culos oficiais, garantindo conformidade com o Decreto 16.109/1994 e oferecendo rastreabilidade completa das sa√≠das e retornos dos ve√≠culos.

## üéØ Funcionalidades Principais

### 1. **Gest√£o de Usu√°rios**
- Sistema de primeiro acesso com valida√ß√£o autom√°tica de matr√≠cula
- Integra√ß√£o com base de servidores p√∫blicos para valida√ß√£o de dados
- Tr√™s n√≠veis de permiss√£o:
  - **Administrador**: Controle total do sistema
  - **Administrador de Unidade**: Gest√£o de ve√≠culos da sua lota√ß√£o
  - **Usu√°rio**: Registro de sa√≠das pessoais

### 2. **Cadastro e Gerenciamento de Ve√≠culos**
- Registro completo de ve√≠culos com marca, modelo e placa
- Vincula√ß√£o de ve√≠culos a unidades administrativas
- Sistema de busca e filtros por placa e unidade
- Controle de ve√≠culos exclu√≠dos (soft delete)

### 3. **Registro de Movimenta√ß√µes**
- **Sa√≠das Regulares**: Sistema completo de registro com:
  - Data e hor√°rio de sa√≠da/retorno
  - Quilometragem de sa√≠da/retorno
  - Destino e finalidade da viagem
  - Valida√ß√£o de primeira e √∫ltima sa√≠da do dia
  - Conformidade com Decreto 16.109/1994

- **Sistema de Empr√©stimo de Ve√≠culos**:
  - Solicita√ß√£o de empr√©stimo entre servidores
  - Aprova√ß√£o/recusa de empr√©stimos
  - Status: pendente, ativo, finalizado

### 4. **Inspe√ß√£o Veicular (Decreto 16.109/1994)**
Implementa√ß√£o completa do decreto municipal que exige:
- ‚úÖ Declara√ß√£o de inspe√ß√£o na primeira sa√≠da do dia
- ‚úÖ Campo obrigat√≥rio para informar irregularidades
- ‚úÖ Valida√ß√£o autom√°tica: motorista deve confirmar inspe√ß√£o OU informar irregularidades
- ‚úÖ Registro de √∫ltima sa√≠da do dia para vistoria final

### 5. **Documenta√ß√£o Fotogr√°fica**
- Upload de fotos do ve√≠culo na sa√≠da:
  - Painel (hod√¥metro)
  - Ve√≠culo completo
  - Frente, traseira, laterais e parte superior
- Sistema de armazenamento seguro de imagens

### 6. **Relat√≥rios e Consultas**
- Hist√≥rico completo de movimenta√ß√µes por ve√≠culo
- Filtros por data, placa e unidade
- Visualiza√ß√£o de empr√©stimos ativos e finalizados
- Quilometragem acumulada por per√≠odo

### 7. **Recursos Administrativos Avan√ßados**
- **Administradores podem**:
  - Iniciar m√∫ltiplas movimenta√ß√µes simult√¢neas do mesmo ve√≠culo
  - Atribuir sa√≠das para outros motoristas
  - Editar e excluir registros
  - Gerenciar ve√≠culos de todas as unidades

- **Interface Diferenciada**:
  - Dois bot√µes de inicia√ß√£o: "Iniciar Minha Sa√≠da" e "Iniciar Nova Sa√≠da"
  - Busca de usu√°rios para atribui√ß√£o de viagens
  - Controles exclusivos de administra√ß√£o

## üõ†Ô∏è Tecnologias Utilizadas

### Backend
- **Framework**: Flask (Python)
- **ORM**: SQLAlchemy
- **Autentica√ß√£o**: Flask-Login
- **Banco de Dados**: MySQL (via PyMySQL)
- **Arquitetura**: Blueprint pattern para modulariza√ß√£o

### Frontend
- **Template Engine**: Jinja2
- **CSS Framework**: Tailwind CSS
- **JavaScript**: Vanilla JS (sem frameworks)
- **√çcones**: Font Awesome
- **Design Responsivo**: Mobile-first approach

### Estrutura do Banco de Dados

#### Tabela: `usuario_ditrans`
```python
- id (PK)
- matricula
- nome_completo
- telefone
- unidade_lotacao
- role (admin/unit_admin/user)
- login_usuario
- id_usuario (FK para Usuario principal)
```

#### Tabela: `veiculos_ditrans`
```python
- id (PK)
- name (modelo)
- brand (marca)
- plate (placa)
- unidade_lotacao
```

#### Tabela: `logs_departamento_ditrans`
```python
- id (PK)
- vehicleName, vehiclePlate
- driverName, matricula, telefone
- destination, finalidade
- departureTime, departureKm
- returnTime, returnKm
- log_type (regular/loan)
- status (active/pending_start/completed)
- primeira_saida_dia, ultima_saida_dia
- declaracao_inspecao_primeira, declaracao_inspecao_ultima
- irregularidade_veiculo
- excluido, editado (controle l√≥gico)
- URLs de fotos (departure/return)
```

## üí° Desafios T√©cnicos Superados

### 1. **Gest√£o de Escopo de Vari√°veis**
**Problema**: `UnboundLocalError` com m√≥dulo datetime sendo referenciado antes da atribui√ß√£o devido a import duplicado dentro de fun√ß√£o.

**Solu√ß√£o**: Identifica√ß√£o e remo√ß√£o de import local que causava sombreamento do m√≥dulo global.

### 2. **Exclus√£o L√≥gica (Soft Delete)**
**Problema**: Registros exclu√≠dos (flag `excluido=True`) ainda apareciam como "ve√≠culo em movimento" e bloqueavam novas sa√≠das.

**Solu√ß√£o**: Implementa√ß√£o de filtros `excluido == False` em todas as queries que verificam ve√≠culos ativos:
```python
existing_log = LogsDepartamentoDitrans.query.filter(
    LogsDepartamentoDitrans.vehiclePlate == data['placa'],
    LogsDepartamentoDitrans.returnTime == None,
    LogsDepartamentoDitrans.excluido == False  # Filtro cr√≠tico
).first()
```

### 3. **Privil√©gios Administrativos Granulares**
**Problema**: Administradores ficavam limitados pela mesma regra de usu√°rios comuns (uma movimenta√ß√£o por ve√≠culo).

**Solu√ß√£o**: Verifica√ß√£o de role antes de aplicar restri√ß√µes:
```python
usuario_ditrans = UsuarioDitrans.query.filter(
    UsuarioDitrans.id_usuario == current_user.id
).first()
user_role = usuario_ditrans.role if usuario_ditrans else 'user'

if user_role != 'admin':
    # Aplica restri√ß√£o apenas para n√£o-admins
    existing_log = LogsDepartamentoDitrans.query.filter(...)
```

### 4. **UI Condicional com Estado Compartilhado**
**Problema**: Campo de busca de usu√°rios aparecia para todos os modos de inicia√ß√£o de viagem, mas deveria ser exclusivo para o bot√£o "Iniciar Nova Sa√≠da" do admin.

**Solu√ß√£o**: Sistema de controle de estado no frontend que:
- Detecta qual bot√£o foi clicado
- Exibe/oculta campo de busca apropriadamente
- Preenche automaticamente dados do usu√°rio logado quando necess√°rio

### 5. **Conformidade Legal Automatizada**
**Implementa√ß√£o**: Valida√ß√£o de inspe√ß√£o veicular conforme Decreto 16.109/1994:
```python
declaracao_ok = data.get('declaracao_inspecao_primeira', False)
irregularidades = data.get('irregularidade_veiculo', '').strip()

# Decreto exige: inspe√ß√£o confirmada OU irregularidades informadas
if not declaracao_ok and not irregularidades:
    return jsonify({
        "error": "Conforme Decreto 16.109/1994: confirme a inspe√ß√£o OU informe as irregularidades."
    }), 400
```

## üìä API RESTful

### Principais Endpoints

#### Usu√°rios
- `GET /api/current_user` - Dados do usu√°rio autenticado
- `PUT /api/current_user` - Atualiza√ß√£o de perfil
- `GET /api/search_users` - Busca de usu√°rios por nome/matr√≠cula

#### Ve√≠culos
- `GET /api/vehicles` - Lista todos os ve√≠culos
- `POST /api/vehicles` - Cadastra novo ve√≠culo
- `PUT /api/vehicles/<id>` - Atualiza ve√≠culo
- `DELETE /api/vehicles/<id>` - Remove ve√≠culo (soft delete)
- `GET /api/vehicles/by_unit` - Filtra ve√≠culos por unidade

#### Movimenta√ß√µes
- `GET /api/logs` - Lista movimenta√ß√µes (com filtros opcionais)
- `POST /api/logs` - Registra nova sa√≠da
- `PUT /api/logs/<id>` - Atualiza movimenta√ß√£o
- `PUT /api/logs/<id>/finish` - Finaliza sa√≠da (registro de retorno)
- `DELETE /api/logs/<id>` - Remove registro (soft delete)
- `GET /api/user_logs` - Movimenta√ß√µes do usu√°rio autenticado

#### Utilit√°rios
- `POST /api/upload` - Upload de fotos
- `GET /api/verificar_matricula/<matricula>` - Valida√ß√£o de matr√≠cula

## üé® Experi√™ncia do Usu√°rio

### Interface Intuitiva
- **Dashboard unificado** com todas as funcionalidades em uma √∫nica p√°gina
- **Navega√ß√£o por abas**: In√≠cio, Cadastros, Relat√≥rios
- **Feedback visual imediato** com alertas de sucesso/erro
- **Pesquisa em tempo real** por placa ou nome de ve√≠culo
- **Modais responsivos** para formul√°rios e detalhes

### Acessibilidade
- Design responsivo para desktop e mobile
- √çcones intuitivos com Font Awesome
- Cores contrastantes seguindo padr√µes de acessibilidade
- Mensagens de erro claras e orientativas

## üìà Resultados e Impacto

### Benef√≠cios Operacionais
- ‚úÖ **Rastreabilidade completa** de todos os ve√≠culos da frota
- ‚úÖ **Conformidade legal** com Decreto 16.109/1994 automatizada
- ‚úÖ **Redu√ß√£o de tempo** no registro de movimenta√ß√µes
- ‚úÖ **Hist√≥rico permanente** de quilometragem e destinos
- ‚úÖ **Controle descentralizado** com permiss√µes por unidade

### M√©tricas de Qualidade
- **Arquitetura modular**: Uso de Blueprints Flask para separa√ß√£o de concerns
- **Seguran√ßa**: Autentica√ß√£o obrigat√≥ria em todas as rotas sens√≠veis
- **Performance**: Queries otimizadas com filtros indexados
- **Manutenibilidade**: C√≥digo organizado com padr√£o MVC

## üîß Melhorias Futuras

- [ ] Sistema de notifica√ß√µes push para empr√©stimos
- [ ] Relat√≥rios em PDF/Excel export√°veis
- [ ] Dashboard com gr√°ficos de utiliza√ß√£o da frota
- [ ] Integra√ß√£o com sistemas de manuten√ß√£o preventiva
- [ ] App mobile nativo para registro de sa√≠das

---

## üë®‚Äçüíª Habilidades Demonstradas

Este projeto demonstra compet√™ncias em:
- **Desenvolvimento Full-Stack** (Python/Flask + JavaScript)
- **Modelagem de Banco de Dados** relacional
- **Autentica√ß√£o e Autoriza√ß√£o** com controle de acesso baseado em roles
- **API RESTful** design e implementa√ß√£o
- **Resolu√ß√£o de Bugs Complexos** (escopo de vari√°veis, soft delete)
- **Conformidade Legal** com automatiza√ß√£o de requisitos regulat√≥rios
- **UI/UX Design** responsivo e intuitivo
- **Arquitetura de Software** modular e escal√°vel

---

**Desenvolvido como parte do Sistema SUAG**  
*Sistema Unificado de Administra√ß√£o Governamental*
